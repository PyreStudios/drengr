"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[322],{3905:function(e,t,r){r.d(t,{Zo:function(){return s},kt:function(){return f}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=c(r),f=o,y=d["".concat(l,".").concat(f)]||d[f]||u[f]||a;return r?n.createElement(y,i(i({ref:t},s),{},{components:r})):n.createElement(y,i({ref:t},s))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},4284:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return p},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return s},default:function(){return d}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),i=["components"],p={sidebar_position:6},l="Containerizing a Steward App",c={unversionedId:"deploying/dockerizing-a-steward-app",id:"deploying/dockerizing-a-steward-app",title:"Containerizing a Steward App",description:"There are many examples of setting up a dockerfile for AoT compiled Dart. Unfortunately, AoT compiled Dart does not support reflection on which Steward relies heavily. We've put together a simple Dockerfile to help with this process.",source:"@site/docs/deploying/dockerizing-a-steward-app.md",sourceDirName:"deploying",slug:"/deploying/dockerizing-a-steward-app",permalink:"/steward/docs/deploying/dockerizing-a-steward-app",editUrl:"https://github.com/pyrestudios/steward/tree/main/docs/deploying/dockerizing-a-steward-app.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Views",permalink:"/steward/docs/app/views"}},s=[{value:"Should you dockerize/containerize your app?",id:"should-you-dockerizecontainerize-your-app",children:[],level:2}],u={toc:s};function d(e){var t=e.components,r=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"containerizing-a-steward-app"},"Containerizing a Steward App"),(0,a.kt)("p",null,"There are many examples of setting up a dockerfile for AoT compiled Dart. Unfortunately, AoT compiled Dart does not support reflection on which Steward relies heavily. We've put together a simple Dockerfile to help with this process."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dockerfile"},'# Specify the Dart SDK base image version using dart:<version> (ex: dart:2.12)\nFROM dart:2.17\nENV HOMEDIR=/manudac\n# Resolve app dependencies.\nWORKDIR /app\n\n# Copy app source code\nCOPY . .\n\nRUN rm /app/pubspec.lock\nRUN rm -rf .dart_tool\n# Ensure packages are still up-to-date if anything has changed\nRUN dart pub get --no-offline\nRUN dart pub update\n\n# Start server.\nEXPOSE 4040\nCMD ["dart", "run", "lib/app.dart"]\n')),(0,a.kt)("p",null,"The important thing to note is that the ",(0,a.kt)("inlineCode",{parentName:"p"},".dart_tool/")," folder has references to your local machine paths (if you've ran the app outside of a container). ",(0,a.kt)("inlineCode",{parentName:"p"},"dart")," will use these references when trying to compile and the references in this file point to code outside of your project directory (your user's pubcache for example). For this reason, we delete the ",(0,a.kt)("inlineCode",{parentName:"p"},".dart_tool/")," folder after copying everything over."),(0,a.kt)("p",null,"If you're running your steward app with docker-compose or a similar tool, you'll need to make sure that any volumes that you're mounting do ",(0,a.kt)("em",{parentName:"p"},"not")," mount the ",(0,a.kt)("inlineCode",{parentName:"p"},".dart_tool/")," folder, too."),(0,a.kt)("h2",{id:"should-you-dockerizecontainerize-your-app"},"Should you dockerize/containerize your app?"),(0,a.kt)("p",null,"Yes. Containerization significantly eases deployments on modern cloud infrastructure. You will have a significantly easier time trying to deploy a container with your app than your code directly. All major cloud providers support running containers at scale, almost none of them provide first-class support for running Dart outside of containers."),(0,a.kt)("p",null,"Additionally, having your app containerized for development helps reduce the hurdles for developing on that app."))}d.isMDXComponent=!0}}]);